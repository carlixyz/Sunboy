<!DOCTYPE html>
<html  xmlns="http://www.w3.org/1999/html" style="background-size: 100%; background-image:url('images/black1926.jpg'); ">

<head>
    <title>SunHouse GameDev Studios</title>
    <link rel="icon" type="image/ico" href="favicon.ico">
    <link rel="shortcut icon" href="favicon.ico">
    <meta name="viewport" content="width=device-width"/>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <link rel="stylesheet" type="text/css" href="style.css" >
    <script type="text/javascript" language="JavaScript" src="scripts/main.js"></script>
    <script type="text/javascript" language="JavaScript" src="scripts/phaser.min.js"></script>
    <script type="text/javascript" language="JavaScript" src="scripts/sunWorld.js"></script>
    <script type="text/javascript" language="JavaScript" src="scripts/sunHome.js"></script>
    <script type="text/javascript" language="JavaScript" src="scripts/sunBoy.js"></script>
    <script type="text/javascript" language="JavaScript" src="scripts/sunPalms.js"></script>
    <script type="text/javascript" language="JavaScript" src="scripts/sunCloud.js"></script>
    <script type="text/javascript" language="JavaScript" src="scripts/sunPelican.js"></script>
    <script type="text/javascript" language="JavaScript" src="scripts/sunCrab.js"></script>
    <!--<script type="text/javascript" language="JavaScript" src="scripts/sunFruit.js"></script>-->
    <!--<script type="text/javascript" src="/scripts/sunGame.js"></script>-->  <!--Game Logic added inside Body -->

</head>

<body  onload="run()" >


<div id="language">
    <img src="images/us.png" title="English (EN)" 	style="width:2.5%;" onclick="SetLang('en')" accesskey="U"/>
    <img src="images/br.png" title="PortuguÍs (PT)" style="width:2.5%;" onclick="SetLang('br')" accesskey="B"/>
    <img src="images/ar.png" title="EspaÒol (ES)" 	style="width:2.5%;" onclick="SetLang('es')" accesskey="A"/>
</div>

<header id="top">
    <div class="navigation">

        <div class="UpsideBand" style= ></div>
        <div class="DownsideBand" style= ></div>
        <div id="logo" >
            <a href="/">
                <h1 class="randomFont" >
                    <img src="images/logo.png"  alt="SunHouse">


                    SunHouse
                    <!--<embed src="images/isotipo_byn.svg" width="50px" height="50px" type="image/svg+xml" />-->
                    <!--<object data="images/isotipo_byn.svg" width="50px" height="50px" type="image/svg+xml"></object>-->
                </h1>
            </a>
        </div>
        <ul>
            <li  >
                <a href="news.html">
                    <div lang="es"> noticias </div>
                    <div lang="en" style="display: none;"> news </div>
                    <div lang="br" style="display: none;"> Informa«ao </div>
                </a>
            </li>
            <li >
                <a href="about.html">
                    <div lang="es"> acerca </div>
                    <div lang="en" style="display: none;"> about </div>
                    <div lang="br" style="display: none;"> nois </div>
                </a>
            </li >
            <li >
                <a href="works.html">
                    <div lang="es"> trabajos </div>
                    <div lang="en" style="display: none;"> works </div>
                    <div lang="br" style="display: none;"> trabalhos </div>
                </a>
            </li>
            <li >
                <a href="contact.html">
                    <div lang="es"> contacto </div>
                    <div lang="en" style="display: none;"> contact </div>
                    <div lang="br" style="display: none;"> contato </div>
                </a>
            </li>
        </ul>

    </div>

    <![if (gt IE 5)&(lt IE 8)]>
    <div class="UpsideBand" style="opacity: 0.5;" ></div>
    <div class="DownsideBand" style="opacity: 0.5;" ></div>
    <!--<h1>You're not using IE. Well done!</h1>-->
    <![endif]>

</header>


<div class="wrapper">


    <!--[if lt IE 9]>
    <div class="MSSUCKS">
    <![endif]--> <!-- MS IExplorer Check Up start-->

    <section  id="home" >
        <!--<img src="images/Home.gif" style="width: 100%;" alt="">-->

        <script type="text/javascript" language="JavaScript" >

            /* MAIN GAME SCRIPT SOURCE
            *
            *
            *
            *
            *
            */

            var game = new Phaser.Game(900, 480, Phaser.CANVAS, '', { preload: preload, create: create, update : update, render : render });

            var alreadyPlayed = false;
//            var play  = false;
//            var start = true;
//            var end   = false;
            var timeLapse = 20;
            var time = 0;
            var loops = 0;

            var score = 0;
            var topScore = 0;
            var health = 3;

            var scoreText;  // Display score and topScore
            var infoText;   // Display Ready?, Loop N∞ & GameOver info

            var player ;
            var world;
            var house;


            var objects;
            var items;
            var enemys;
            var palms;

            var states = {  INTRO: 0, START: 1, INGAME: 2, BUCLE: 3, GAMEOVER: 4 };

            function preload ()
            {

                game.currentState = states.INTRO;

                Phaser.Canvas.addToDOM(game.canvas, "home", true);      // attach Phaser Canvas inside Web Content
                Phaser.Canvas.setBackgroundColor(game.canvas, "white"); // Setup white background to fit web design

                player = new SunBoy(game);
                world = new SunWorld(game);
                house = new SunHome(game);
                palms = new SunPalms(game);
                cloud = new SunCloud(game);
                enemys = new SunPelican(game);
//                enemys = new SunCrab(game);

                game.load.image('mask', 'images/sunMask.png');

            }

            function create ()
            {
                console.log("HI WORLD");
                console.log(currentFont);

                world.create(game, 360);
                house.create(game, 0);
                player.create(game, 0);

//                palms.create(game, 0);
//                cloud.create(game, 0);
                enemys.create(game, 0);

                mask = game.add.sprite(game.world.centerX, game.world.centerY, 'mask');
                mask.anchor.setTo(0.5, 0.5);

                var style = { font: "12px MyriadPro-Regular", fill: "white", align: "center" };
                scoreText = game.add.text(game.world.centerX, game.world.centerY -110, "10000", style);
                scoreText.anchor.setTo(0.5,0.5);

                infoText = game.add.text(game.world.centerX + 5, game.world.centerY -50, "READY?", style);
                infoText.anchor.setTo(0.5,0.5);

                // game.world.centerY - 110 == 130
//                game.add.tween(t).to({ y: 130 }, 5000, Phaser.Easing.Exponential.InOut, true, 100, false);


            }


            function update()
            {

                game.physics.collide(player.sprite, world.sprite);

                ///////////////////////////////////////////////////////////////////

                switch ( game.currentState )
                {
                    case states.INTRO:
                            timeLapse = 0;
                            player.sprite.visible = false;
                            player.sprite.body.allowGravity = false;
                            scoreText.visible = false;
                            infoText.visible = false;

//                          game.currentState = states.START; // set inside world.GrowTween(game);
                        break;

                    case states.START:
                            scoreText.content = score = loops = time = 0;
                            scoreText.visible = alreadyPlayed;


                            if ( (game.input.mousePointer.isDown || game.input.keyboard.isDown(Phaser.Keyboard.SPACEBAR))&&
                                    player.sprite.body.allowGravity == false)
                            {
                                alreadyPlayed = true;
                                player.sprite.body.allowGravity = true;

                                infoText.visible = true;
                                infoText.content = "GET READY?";
                                infoText.alpha = 0;

                                player.sprite.visible = true;
                                player.sprite.animations.play('idle', 1, false);

                                player.sprite.x = 435;
                                player.sprite.y = 250;

                                game.add.tween(infoText).to({ alpha: 1 }, 2000, Phaser.Easing.Elastic.InOut, true, 100, false)
                                    .onCompleteCallback( function()
                                    {
                                        infoText.content = "GO!";
                                        scoreText.visible = true;
                                        player.sprite.animations.play('run', 7, true);
                                        game.currentState = states.INGAME;

                                        game.add.tween(infoText).to({ alpha: 0 }, 2000, Phaser.Easing.Elastic.InOut, true, 100, false)
                                            .onCompleteCallback( function()
                                            {
                                                infoText.visible = false;
                                            }
                                        )
                                    }
                                );
// Some optional code
//                                infoText.visible = true;
//                                infoText.content = "GET READY";
//                                infoText.alpha = 0;
//                                infoText.y = 400;
//
//                                game.add.tween(infoText).to({ alpha: 1, y: 190 }, 2000, Phaser.Easing.Elastic.Out, true, 100, false)
//                                        .onCompleteCallback( function()
//                                        {
//                                            infoText.content = "GO!";
//                                            scoreText.visible = true;
//                                            player.sprite.animations.play('run', 7, true);
//                                            game.currentState = states.INGAME;
//
//                                            game.add.tween(infoText).to({ alpha: 0, y: 0 }, 2000, Phaser.Easing.Elastic.In, true, 100, false)
//                                                    .onCompleteCallback( function()
//                                                    {
//                                                        infoText.visible = false;
//                                                    }
//                                            )
//                                        }
//                                );
                            }


                        break;

                    case states.INGAME:

                            scoreText.content = score;

                            world.update(game);
                            house.update(game);
//                            palms.update(game);
//                            cloud.update(game);
                            enemys.update(game);
                            player.update(game);

                        break;
                    case states.BUCLE:

                        player.sprite.animations.play('idle', 1, false);
                        infoText.visible = true;
                        infoText.content = "LOOP " + ++loops;
                        infoText.alpha = 0;

                        game.add.tween(infoText).to({ alpha: 1 }, 2000, Phaser.Easing.Elastic.InOut, true, 100, false)
                            .onCompleteCallback( function()
                            {
                                infoText.content = "GO!";
                                scoreText.visible = true;
                                player.sprite.animations.play('run', 7, true);
                                game.currentState = states.INGAME;

                                game.add.tween(infoText).to({ alpha: 0 }, 2000, Phaser.Easing.Elastic.InOut, true, 100, false)
                                    .onCompleteCallback( function()
                                    {
                                        infoText.visible = false;
                                    }
                                )
                            }
                        );
                        break;
                    case states.GAMEOVER:
                        topScore = ( score > topScore ? score :  topScore) ;

                        timeLapse = 10;

                        break;

                }
            }


            function Flick(sprite)
            {


            }
            function sayLoop(game)
            {
                infoText.visible = true;
                loops += 1;
                infoText.content = "LOOP #" + loops;
            }
            function sayGameOver(game)
            {
                infoText.visible = true;
                infoText.content = "GAME OVER";
            }

            function resetGame()
            {

            }

            function render() {

                // Sprite debug info
//                palms.render();
//                cloud.render();
                  enemys.render();
//                world.render();
//                player.render();
//                game.debug.renderSpriteInfo(world, 32, 32);
//                game.debug.renderLocalTransformInfo(world, 32, 160);
//                game.debug.renderWorldTransformInfo(world, 32, 290);

//                game.debug.renderText("Time until event: " + game.time.events.duration, 32, 32);
            }

        </script>


    </section>

    <!--[if lt IE 9]>
    </div>
    <![endif]--> <!-- MS IExplorer Check Up End-->

</div>


</body>

</html>